{% extends "base.html" %}
{% block content %}

<div class="container mt-5" style="max-width: 700px;">

    <div class="card shadow-sm">
        <div class="card-body">

            <h4 class="mb-4 text-center fw-bold">Richiesta Prestito</h4>

            <!-- IMPORTO TOTALE -->
            <div class="mb-4">
                <label class="fw-bold mb-2">
                    Importo richiesto:
                </label>

                <div class="text-center mb-2">
                    <span class="badge bg-dark fs-6 px-3 py-2" id="importoLabel">
                        10.000€
                    </span>
                </div>

                <input type="range"
                       class="form-range"
                       min="1000" max="25000"
                       step="500"
                       value="10000"
                       id="importoRange"
                       oninput="aggiornaImporto()">

                <div class="d-flex justify-content-between text-muted">
                    <small>1.000€</small>
                    <small>25.000€</small>
                </div>
            </div>

            <!-- TASSO FISSO -->
            <div class="mb-4">
                <label class="fw-bold mb-2">
                    Tasso Annuo Nominale (TAN):
                </label>
                <div class="alert alert-info py-2 m-0 text-center">
                    <strong>6,5% annuo</strong>
                </div>
            </div>

            <!-- DURATA -->
            <div class="mb-4">
                <label class="fw-bold mb-2">Durata del prestito:</label>
                <select class="form-select" id="durata" required onchange="checkForm()">
                    <option value="" selected disabled>Seleziona durata...</option>
                    <option value="12">12 mesi</option>
                    <option value="24">24 mesi</option>
                    <option value="36">36 mesi</option>
                    <option value="48">48 mesi</option>
                    <option value="60">60 mesi</option>
                </select>
            </div>

            <!-- FINALITÀ -->
            <div class="mb-4">
                <label class="fw-bold mb-2">Finalità prestito:</label>
                <select class="form-select" id="finalita" required onchange="checkForm()">
                    <option value="" selected disabled>Scegli opzione...</option>
                    <option value="auto">Acquisto auto</option>
                    <option value="casa">Spese casa</option>
                    <option value="studio">Studio / Formazione</option>
                    <option value="viaggio">Viaggi</option>
                    <option value="altro">Altro</option>
                </select>
            </div>

            <!-- BOTTONE -->
            <div class="d-flex justify-content-between mt-4">
                <a href="javascript:history.back()" class="btn btn-danger px-4">
                    Annulla
                </a>

                <button class="btn btn-success px-4" id="btnInvia" disabled>
                    Richiedi Prestito
                </button>
            </div>

        </div>
    </div>

</div>

<!-- SCRIPT -->
<script>
    function aggiornaImporto() {
        const range = document.getElementById("importoRange");
        document.getElementById("importoLabel").innerText =
            new Intl.NumberFormat('it-IT').format(range.value) + "€";
        checkForm();
    }

    function checkForm() {
        const durata = document.getElementById("durata").value;
        const finalita = document.getElementById("finalita").value;
        const btn = document.getElementById("btnInvia");

        btn.disabled = !(durata !== "" && finalita !== "");
    }
</script>

{% endblock %}
